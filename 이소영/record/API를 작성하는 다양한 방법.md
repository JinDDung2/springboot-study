# 5️⃣ API를 작성하는 다양한 방법

### API를 작성할 때 사용하는 Annotation

##### `@RequestMapping()`

- 클래스 수준에서 설정하며, 내부에 선언한 메서드의 URL 리소스 앞에 `@RequestMappig`의 값이 공통 값으로 추가

##### `@PathVariable()`

- 매개변수를 받을 때 자주 쓰이는 방법 중 하나로, URL 자체에 값을 담아 요청할 때 사용
- 값을 간단히 전달할 때 주로 사용하며, GET 요청세어 많이 사용
- API Annotation에 지정한 변수의 이름과 메서드 매개변수의 이름이 동일하지 않다면 `@PathVariable` 뒤에 괄호를 열어 변수명을 별도로 지정하여 매핑

##### `@RequestParam()`

- 매개변수를 받을 때 쓰이는 방법 중 하나로, 쿼리 형식으로 값을 전달할 때 사용
- URI에서 '?'를 기준으로 우측에 '{키} = {값}' 형태로 구성된 요청을 전송하는 방법
- API Annotation에 지정한 변수의 이름과 메서드 매개변수의 이름이 동일하지 않다면 `@RequestParam()` 뒤에 괄호를 열어 변수명을 별도로 지정하여 매핑

- 만약, 쿼리스트링에 매개변수의 항목이 일정하지 않은 경우가 발생할 수 있다면 Map객체로 받는 것이 효율적

##### `@RequestBody()`

- HTTP Body 내용을 해당 Annotaion이 지정된 객체에 매핑하는 역할

##### `@ResponseBody()`

- 자동으로 값을 JSON과 같은 형식으로 변환하여 전달하는 역할
- `@RestController` Annotation이 지정된 클래스에서는 생략 가능

<br />

<br />

### GET API

- 웹 어플리케이션 서버에서 값을 가져올 때 사용하는 API
- `@GetMapping('맵핑할 URL')`  Annotation 선언을 통해 사용
- 주로 URL의 경로나 파라미터에 변수를 넣어 요청을 보냄

<br />

### POST API

- 웹 어플리케이션을 통해 클라이언트가 데이터베이스 등의 저장소에 리소스를 저장할 때 사용되는 API
- `@PostMapping('맵핑할 URL')` Annotation 선언을 통해 사용
- 저장하고자하는 리소스나 값을 HTTP 바디(body)에 담아 서버에 전달

- 일반적으로 HTTP 바디(body)에 담기는 데이터는 JSON(JavaScript Object Notation) 형태로 전송됨

<br />

### PUT API

- 웹 애플리케이션 서버를 통해 데이터베이스 같은 저장소에 존재하는 리소스 값을 업데이트 하는 데 사용
- 컨트롤러 클래스를 구현하는 방법은 POST API와 거의 동일하지만, 요청을 받아 실제 데이터베이스에 반영하는 관정(서비스 로직)에서 차이가 있음

<br />

### DELETE API

- 웹 애플리케이션 서버를 거쳐 데이터베이스 등의 저장소에 있는 리소스를 삭제할 때 사용
- 서버에서는 클라이언트로부터 리소스를 식별할 수 있는 값을 받아 데이터베이스나 캐시에 있는 리소스를 조회하고 삭제하는 역할을 수행
- 컨트롤러를 통해 값을 받는 단계에서는 간단한 값을 받기 때문에 GET 메서드처럼 URI에 값을 넣어 요청을 받는 형식으로 구현

<br />

<br />

### REST API 명세를 문서화하는 방법 - Swagger

##### 명세란?

- 해당 API가 어떤 로직을 수행하는지 설명하고 이를 수행하기 위해 어떤 값을 요청하며, 이에 따른 응답값으로는 무엇을 받을 수 있는지 정리한 자료

  👉 개발 과정에서 API는 계속 변경되고, 명세 문서를 주기적으로 업데이트 하는 작업의 번거로움과 많은 시간 투자를 해결하는 방법 = Swagger

##### Swagger가 사용하는 대표 Annotation

- `@ApiOperation` : 대상 API의 설명을 작성하기 위한 Annotation
- `@ApiParam` : 매개변수에 대한 설명 및 설정을 위한 Annotation으로, 메서드의 매개변수뿐 아니라 매개변수로 사용되는 DTO클래스 내의 매개변수에도 정의 가능

<br />

<br />

### 로깅 라이브러리 - Logback

##### 로깅(logging)이란?

- 애플리케이션이 동작하는 동안 시스템의 상태나 동작 정보를 시간순으로 기록하는 것을 의미
- 개발 영역 중 '비기능 요구사항'에 속하지만, 디버깅 or  개발 이후 발생한 문제를 해결할 때 원인을 분석하는 데 꼭 필요한 요소

<br />

##### Logback이란?

- log4j 이후에 출시된 로깅 프레임워크로서 slf4j를 기반으로 구현됐으며, 과거에 사용되던 log4j에 비해 월등한 성능을 자랑
- spring-boot-starter-web 라이브러리 내부에 내장

<br />

##### Logback의 특징

-  크게 5개의 **로그 레벨** 설정 가능

  1️⃣ **ERROR** : 로직 수행 중 시스템에 심각한 문제가 발생하여 애플리케이션의 작동이 불가능한 경우

  2️⃣ **WARN** : 시스템 에러의 원인이 될 수 있는 경고 레벨

  3️⃣ **INFO** : 애플리케이션의 상태 변경과 같은 정보 전달을 위해 사용

  4️⃣ **DEBUG** : 애플리케이션의 디버깅을 위한 메시지를 표시하는 레벨

  5️⃣ **TRACE** : DEBUG 레벨보다 더 상세한 메시지를 표현하기 위한 레벨

- 실제 운영 환경과 갭라 환경에서 각가 다른 출력 레벨을 설정하여 로그를 확인 가능
- Logback의 설정 파일을 일정 시간마다 스캔하여 애플리케이션을 재가동하지 않아도 설정 변경 가능
- 별도의 프로그램 지원 없이도 자체적으로 로그 파일 압축 가능
- 저장된 로그 파일에 대한 보관 기간 등을 설정하여 관리 가능